<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
                    xmlns:bv="clr-namespace:RoSatGCS.Behaviors"
                    xmlns:cvt="clr-namespace:RoSatGCS.Utils.Converter"
                    xmlns:adonisUi="clr-namespace:AdonisUI;assembly=AdonisUI"
                    xmlns:loc="clr-namespace:RoSatGCS.Utils.Localization"
                    xmlns:local="clr-namespace:RoSatGCS.Views"
                    xmlns:vm="clr-namespace:RoSatGCS.ViewModels"
                    xmlns:controls="clr-namespace:RoSatGCS.Controls">
    <cvt:ByteStringConverter x:Key="ByteStringConverter"/>
    <BooleanToVisibilityConverter x:Key="BoolToVisibility"/>
    <Style x:Key="Splitter" TargetType="Rectangle">
        <Setter Property="VerticalAlignment" Value="Stretch"/>
        <Setter Property="Width" Value="1"/>
        <Setter Property="Margin" Value="3,6,3,6"/>
        <Setter Property="Stroke" Value="{DynamicResource {x:Static adonisUi:Brushes.Layer1BorderBrush}}"/>
    </Style>

    <DataTemplate x:Key="PaneTemplateFunctionProperty" DataType="{x:Type vm:PaneFunctionPropertyViewModel}">
        <Grid Margin="10,5,10,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="20"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="35"/>
            </Grid.RowDefinitions>
            <StackPanel Grid.Row="0" Orientation="Horizontal">
                <TextBlock Text="ID" FontWeight="Bold" Margin="4,0,8,0"/>
                <TextBlock Text="{Binding Command.Id}" Margin="0,0,15,0"/>
                <Rectangle Style="{StaticResource Splitter}" Height="12" VerticalAlignment="Top" Margin="3,3,3,3"/>
                <TextBlock Text="{loc:Localization sFile}" FontWeight="Bold" Margin="5,0,10,0"/>
                <TextBlock Text="{Binding Command.File}" Margin="0,0,15,0"/>
                <Rectangle Style="{StaticResource Splitter}" Height="12" VerticalAlignment="Top" Margin="3,3,3,3"/>
                <TextBlock Text="{loc:Localization sName}" FontWeight="Bold" Margin="5,0,10,0"/>
                <TextBlock Text="{Binding Command.Name}" Margin="0,0,15,0" />
                <Rectangle Style="{StaticResource Splitter}" Height="12" VerticalAlignment="Top" Margin="3,3,3,3"/>
                <TextBlock Text="{loc:Localization sSize}" FontWeight="Bold" Margin="5,0,10,0"/>
                <TextBlock Text="{Binding Command.InSize, Converter={StaticResource ByteStringConverter}}"/>
                <TextBlock Text=" / "/>
                <TextBlock Text="{Binding Command.OutSize, Converter={StaticResource ByteStringConverter}}" Margin="0,0,15,0" />
            </StackPanel>

            <Border Grid.Row="1" BorderThickness="0,0,0,0.4" BorderBrush="{DynamicResource {x:Static adonisUi:Brushes.Layer2BorderBrush}}">
                <ScrollViewer>
                    <StackPanel Orientation="Vertical">
                        <TextBlock Text="{Binding Command.Description}" TextWrapping="Wrap"/>
                        <WrapPanel Margin="5,4,0,0" Visibility="{Binding HasInput, Converter={StaticResource BoolToVisibility}}" Cursor="Hand">
                            <b:Interaction.Triggers>
                                <b:EventTrigger EventName="MouseLeftButtonDown">
                                    <b:InvokeCommandAction Command="{Binding ParametersClick}"/>
                                </b:EventTrigger>
                            </b:Interaction.Triggers>
                            <TextBlock Text="{loc:Localization sParameters}" FontWeight="Bold"/>
                            <ContentControl Content="{Binding IsParametersVisible}" Margin="3,0,0,0" ContentTemplateSelector="{StaticResource ShowHideIconTemplate}"/>
                        </WrapPanel>
                        <Grid Visibility="{Binding IsParametersVisible, Converter={StaticResource BoolToVisibility}}">
                            <Grid.Style>
                                <Style TargetType="Grid">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Command.IsExecuting}" Value="True">
                                            <Setter Property="Effect">
                                                <Setter.Value>
                                                    <BlurEffect Radius="1"/>
                                                </Setter.Value>
                                            </Setter>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Grid.Style>
                            <ListBox ItemsSource="{Binding InputParameters}"
                             ScrollViewer.CanContentScroll="False" ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                             ScrollViewer.VerticalScrollBarVisibility="Disabled"  bv:PassMouseWheelBehavior.EnableMouseWheelPass="True">
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <Grid>
                                            <controls:ParameterBox Grid.Column="0" Parameter="{Binding}" Width="250"/>
                                        </Grid>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                                <ListBox.ItemContainerStyle>
                                    <Style TargetType="ListBoxItem">
                                        <Setter Property="HorizontalAlignment" Value="Stretch"/>
                                        <Setter Property="VerticalContentAlignment" Value="Top"/>
                                        <Setter Property="MaxHeight" Value="145"/>
                                        <Setter Property="Focusable" Value="False"/>
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="{x:Type ListBoxItem}">
                                                    <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="true">
                                                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                                                    </Border>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </ListBox.ItemContainerStyle>
                                <ListBox.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel VerticalAlignment="Top" Width="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=ListBox}}"/>
                                    </ItemsPanelTemplate>
                                </ListBox.ItemsPanel>
                            </ListBox>
                            <Border Visibility="{Binding Command.IsExecuting, Converter={StaticResource BoolToVisibility}}" Background="#A0FFFFFF">
                                <ContentControl ContentTemplate="{DynamicResource {x:Static adonisUi:Templates.LoadingCircle}}"
                             Foreground="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Width="12" Height="12"  Focusable="False"/>
                            </Border>
                        </Grid>


                        <WrapPanel Margin="5,4,0,0" Visibility="{Binding HasOutput, Converter={StaticResource BoolToVisibility}}" Cursor="Hand">
                            <b:Interaction.Triggers>
                                <b:EventTrigger EventName="MouseLeftButtonDown">
                                    <b:InvokeCommandAction Command="{Binding ResultsClick}"/>
                                </b:EventTrigger>
                            </b:Interaction.Triggers>
                            <TextBlock Text="{loc:Localization sResults}" FontWeight="Bold"/>
                            <ContentControl Content="{Binding IsResultsVisible}" Margin="3,0,0,0" ContentTemplateSelector="{StaticResource ShowHideIconTemplate}"/>
                        </WrapPanel>
                        <Grid Visibility="{Binding IsResultsVisible, Converter={StaticResource BoolToVisibility}}">
                            <Grid.Style>
                                <Style TargetType="Grid">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Command.IsExecuting}" Value="True">
                                            <Setter Property="Effect">
                                                <Setter.Value>
                                                    <BlurEffect Radius="1"/>
                                                </Setter.Value>
                                            </Setter>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Grid.Style>
                            <ListBox ItemsSource="{Binding OutputParameters}"
                        ScrollViewer.CanContentScroll="False" ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                        ScrollViewer.VerticalScrollBarVisibility="Disabled"  bv:PassMouseWheelBehavior.EnableMouseWheelPass="True">
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <Grid>
                                            <controls:ParameterBox Grid.Column="0" Parameter="{Binding}" Width="250"/>
                                        </Grid>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                                <ListBox.ItemContainerStyle>
                                    <Style TargetType="ListBoxItem">
                                        <Setter Property="HorizontalAlignment" Value="Stretch"/>
                                        <Setter Property="VerticalContentAlignment" Value="Top"/>
                                        <Setter Property="MaxHeight" Value="145"/>
                                        <Setter Property="Focusable" Value="False"/>
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="{x:Type ListBoxItem}">
                                                    <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="true">
                                                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                                                    </Border>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </ListBox.ItemContainerStyle>
                                <ListBox.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel VerticalAlignment="Top" Width="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=ListBox}}"/>
                                    </ItemsPanelTemplate>
                                </ListBox.ItemsPanel>
                            </ListBox>
                            <Border Grid.ColumnSpan="5" Visibility="{Binding Command.IsExecuting, Converter={StaticResource BoolToVisibility}}" Background="#A0FFFFFF">
                                <ContentControl ContentTemplate="{DynamicResource {x:Static adonisUi:Templates.LoadingCircle}}"
                            Foreground="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Width="12" Height="12"  Focusable="False"/>
                            </Border>
                        </Grid>
                    </StackPanel>
                </ScrollViewer>
            </Border>

            <StackPanel Grid.Row="2" HorizontalAlignment="Right" Orientation="Horizontal" VerticalAlignment="Bottom">
                <Button Content="{loc:Localization sExecute}" VerticalAlignment="Center" Width="80" Height="24" Margin="2" Command="{Binding Execute}"/>
                <Button Content="{loc:Localization sSave}" VerticalAlignment="Center" Width="80" Height="24" Margin="2" Command="{Binding Save}"/>
                <Button Content="{loc:Localization sClose}" VerticalAlignment="Center" Width="80" Height="24" Margin="2" Command="{Binding Close}"/>
            </StackPanel>
        </Grid>
    </DataTemplate>
</ResourceDictionary>