<Page x:Class="RoSatGCS.Views.PageCommand"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:adonisUi="clr-namespace:AdonisUI;assembly=AdonisUI"
      xmlns:adonisExtensions="clr-namespace:AdonisUI.Extensions;assembly=AdonisUI"
      xmlns:local="clr-namespace:RoSatGCS.Views"
      xmlns:loc="clr-namespace:RoSatGCS.Utils.Localization"
      xmlns:bv="clr-namespace:RoSatGCS.Behaviors"
      xmlns:cvt="clr-namespace:RoSatGCS.Utils.Converter"
      xmlns:ap="clr-namespace:RoSatGCS.Utils.AttachedProperties"
      xmlns:controls="clr-namespace:RoSatGCS.Controls"
      xmlns:sys="clr-namespace:System;assembly=mscorlib"

      mc:Ignorable="d" 
      d:DesignHeight="450" d:DesignWidth="800"
      Title="PageCommand">
    <Page.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Views/PaneTemplateCommandFile.xaml"/>
                <ResourceDictionary Source="/Views/PaneTemplateTypeDictionary.xaml"/>
                <ResourceDictionary Source="/Views/PaneTemplateFunctionList.xaml"/>
                <ResourceDictionary Source="/Views/PaneTemplateFunctionProperty.xaml"/>
                <ResourceDictionary Source="/Views/PaneTemplateCommandSet.xaml"/>
                <ResourceDictionary Source="/Views/PaneTemplateTypeSummary.xaml"/>
                <ResourceDictionary Source="/Views/PaneTemplatePropertyPreview.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Page.Resources>
    <b:Interaction.Triggers>
        <b:EventTrigger EventName="Loaded">
            <b:InvokeCommandAction Command="{Binding Loaded}"/>
        </b:EventTrigger>
    </b:Interaction.Triggers>
    <Grid>
        <Label>Command</Label>
        <DockingManager x:Name="dockManager" AnchorablesSource="{Binding Anchorable}" DocumentsSource="{Binding DocumentPane}" ActiveContent="{Binding ActiveDocument, Mode=TwoWay}"
                        ShowNavigator="False">
            <DockingManager.LayoutItemTemplateSelector>
                <local:PanesTemplateSelector CommandFilePaneTemplate="{StaticResource PaneTemplateCommandFile}"
                                             TypeDictionaryPaneTemplate="{StaticResource PaneTemplateTypeDictionary}"
                                             FunctionListPaneTemplate="{StaticResource PaneTemplateFunctionList}"
                                             FunctionPropertyPaneTemplate="{StaticResource PaneTemplateFunctionProperty}"
                                             CommandSetPaneTemplate="{StaticResource PaneTemplateCommandSet}"
                                             TypeSummaryPaneTemplate ="{StaticResource PaneTemplateTypeSummary}"
                                             PropertyPreviewPaneTemplate="{StaticResource PaneTemplatePropertyPreview}"/>
            </DockingManager.LayoutItemTemplateSelector>
            <DockingManager.LayoutItemContainerStyleSelector>
                <local:PanesStyleSelector>
                    <local:PanesStyleSelector.CommandFilePaneStyle>
                        <Style TargetType="{x:Type LayoutAnchorableItem}">
                            <Setter Property="Title" Value="{loc:Localization sCommandFile}"/>
                            <Setter Property="CanMove" Value="False"/>
                            <Setter Property="CanFloat" Value="False"/>
                            <Setter Property="CanClose" Value="False"/>
                            <Setter Property="CanHide" Value="False"/>
                        </Style>
                    </local:PanesStyleSelector.CommandFilePaneStyle>
                    <local:PanesStyleSelector.TypeDictionaryPaneStyle>
                        <Style TargetType="{x:Type LayoutAnchorableItem}">
                            <Setter Property="Title" Value="{loc:Localization sTypeDictionary}"/>
                            <Setter Property="CanMove" Value="False"/>
                            <Setter Property="CanFloat" Value="False"/>
                            <Setter Property="CanClose" Value="False"/>
                            <Setter Property="CanHide" Value="False"/>
                        </Style>
                    </local:PanesStyleSelector.TypeDictionaryPaneStyle>

                    <local:PanesStyleSelector.FunctionListPaneStyle>
                        <Style TargetType="{x:Type LayoutDocumentItem}">
                            <Setter Property="Title" Value="{loc:Localization sFunctions}"/>
                            <Setter Property="CanClose" Value="False"/>
                        </Style>
                    </local:PanesStyleSelector.FunctionListPaneStyle>

                    <local:PanesStyleSelector.CommandSetPaneStyle>
                        <Style TargetType="{x:Type LayoutDocumentItem}">
                            <Setter Property="Title" Value="{loc:Localization sCommandSet}"/>
                            <Setter Property="CanClose" Value="False"/>
                        </Style>
                    </local:PanesStyleSelector.CommandSetPaneStyle>

                    <local:PanesStyleSelector.TypeSummaryPaneStyle>
                        <Style TargetType="{x:Type LayoutDocumentItem}">
                            <Setter Property="Title" Value="{Binding Model.Title}"/>
                            <Setter Property="CanClose" Value="True"/>
                            <Setter Property="CloseCommand" Value="{Binding Model.Close}"/>
                        </Style>
                    </local:PanesStyleSelector.TypeSummaryPaneStyle>
                    <local:PanesStyleSelector.FunctionPropertyPaneStyle>
                        <Style TargetType="{x:Type LayoutDocumentItem}">
                            <Setter Property="Title" Value="{Binding Model.Title}"/>
                            <Setter Property="CanClose" Value="True"/>
                            <Setter Property="CloseCommand" Value="{Binding Model.Close}"/>
                        </Style>
                    </local:PanesStyleSelector.FunctionPropertyPaneStyle>
                    <local:PanesStyleSelector.PropertyPreviewPaneStyle>
                        <Style TargetType="{x:Type LayoutDocumentItem}">
                            <Setter Property="Title" Value="Property Preview"/>
                            <Setter Property="CanClose" Value="True"/>
                            <Setter Property="CloseCommand" Value="{Binding Model.Close}"/>
                        </Style>
                    </local:PanesStyleSelector.PropertyPreviewPaneStyle>
                </local:PanesStyleSelector>
            </DockingManager.LayoutItemContainerStyleSelector>
            <DockingManager.LayoutUpdateStrategy>
                <local:PanesLayoutInitializer/>
            </DockingManager.LayoutUpdateStrategy>

            <LayoutRoot>
                <LayoutPanel Orientation="Horizontal">
                    <LayoutAnchorablePaneGroup DockWidth="300" Orientation="Vertical">
                        <LayoutAnchorablePane Name="CommandFilePane" DockHeight="2*"/>
                        <LayoutAnchorablePane Name="TypeDictionaryPane"/>
                    </LayoutAnchorablePaneGroup>
                </LayoutPanel>
            </LayoutRoot>
        </DockingManager>
    </Grid>
</Page>
